# {{ ansible_managed }}

router id {{ loopback_address }};
log syslog all;

protocol kernel {
  device routes;
  import all;
  export all;
  kernel table 16;
};

protocol device {
  scan time 8;
};

protocol direct {
  interface "lo";
  interface "tun*";
};

{% if local_as.ipv4 is defined %}
protocol static {
  route {{ local_as.ipv4 }} unreachable;
  route {{ local_as.nat }} unreachable;
};
{% endif %}

protocol ospf ddorf {
  import all;
  export all;
  area 0.0.0.0 {
    interface "lo";
    interface "tun-edge*";
  };
  area 0.0.0.1 {
    interface "tun-netminion*";
  };
  area 0.0.0.3 {
    interface "tun-tomo";
  };
};
